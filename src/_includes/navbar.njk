<nav class="navbar">
    {% set navPages = collections.all | eleventyNavigation %}
    {% macro renderNavListItem(entry) -%}
        <li{% if entry.url == page.url %} class="active"{% endif %}>
            {%- if entry.children.length -%}
                <a href="{{ entry.url }}" class="has-children">{{ entry.title }}</a>
                <ul class="child-list">
                    {%- for child in entry.children %}{{ renderNavListItem(child) }}
                    {% endfor -%}
                </ul>
            {% else %}
                <a href="{{ entry.url }}">{{ entry.title }}</a>
            {%- endif -%}
        </li>
    {%- endmacro %}
    <input type="checkbox" id="menu-toggle">
    <label class='menu-button-container' for="menu-toggle">
        <div class='menu-button'></div>
    </label>

    <div class="nav-logo">
        <a href="/">CCA Aerospace</a>
    </div>

    <div class="main-nav">
        <div class="left">
            <ul>
                {%- for entry in navPages %}{{ renderNavListItem(entry) }}
                {%- endfor -%}
            </ul>
        </div>

        <div class="right">
            <ul>
                <li>
                    <a href="/join">
                        <button class="button-primary">Join Us</button>
                    </a>
                </li>
            </ul>
        </div>
    </div>
</nav>